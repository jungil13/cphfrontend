import b from"./Account-qF8V5u8G.js";import{_,k as m,c as l,b as x,a as t,m as c,e as u,t as d,F as f,l as w,o as i,g as v,s as U,r as y}from"./index-DTcQMwFa.js";const k={components:{Account:b},data(){return{user:null,editableUser:{},isEditing:!1,previewImage:null}},created(){this.fetchUserDetails()},methods:{async fetchUserDetails(){const s=localStorage.getItem("token");try{const e=await m.get("http://localhost:3000/api/users/user",{headers:{Authorization:`Bearer ${s}`}});this.user=e.data,this.editableUser={...this.user,Password:""}}catch(e){console.error("Error fetching user details:",e),alert("Failed to load user details. Please try again.")}},getProfilePhotoUrl(s){return s?`http://localhost:3000/${s}`:"/path/to/default/image.jpg"},handleFileChange(s){const e=s.target.files[0];this.editableUser.ProfilePhoto=e,this.previewImage=URL.createObjectURL(e)},async saveInformation(){if(!this.editableUser.UserID){alert("User ID is missing or invalid.");return}const s=new FormData;Object.keys(this.editableUser).forEach(e=>{e==="ProfilePhoto"&&this.editableUser[e]instanceof File?s.append("ProfilePhoto",this.editableUser[e]):s.append(e,this.editableUser[e])});try{const e=localStorage.getItem("token"),h=await m.put(`http://localhost:3000/api/users/${this.editableUser.UserID}`,s,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}});this.user=h.data.user,this.editableUser={...this.user,Password:""},this.isEditing=!1,this.previewImage=null,alert("Information updated successfully.")}catch(e){console.error("Error updating user details:",e.response?e.response.data:e),alert(`Failed to update user details: ${e.response?e.response.data.message:"Please try again."}`)}},cancelEdit(){this.isEditing=!1,this.previewImage&&(URL.revokeObjectURL(this.previewImage),this.previewImage=null),this.editableUser={...this.user,Password:""}},shouldShowField(s){return!["UserID","UserType","created_at","updated_at","isVerified","verificationToken"].includes(s)},formatLabel(s){return s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}}},P={class:"w-full"},I={class:"bg-zinc-700 p-8 mx-4 md:mx-8 lg:mx-12 xl:mx-16 shadow-lg rounded-3xl text-center mb-10"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto"},C={class:"col-span-full flex justify-center relative"},D={class:"w-32 h-32 lg:w-40 lg:h-40 rounded-full overflow-hidden border-4 border-white shadow-md cursor-pointer"},F=["src"],V={key:0,class:"border absolute ml-24 bottom-0 bg-blue-500 text-white p-2 rounded-full shadow-lg"},j=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1),A=[j],L={key:0,class:"col-span-full"},S={class:"text-3xl font-extrabold text-white mb-4"},B={key:0,class:"ml-2 text-xl font-bold text-sky-100 mb-2"},N={class:"text-xl font-bold text-gray-100 mb-2"},z=t("span",{class:"font-medium"},"Age : ",-1),R={class:"text-xl font-bold text-gray-100 mb-2"},T=t("span",{class:"font-medium"},"Email : ",-1),M={class:"text-xl font-bold text-gray-100 mb-2"},O=t("span",{class:"font-medium"},"Phone Number : ",-1),J={class:"text-xl font-bold text-gray-100 mb-2"},Z=t("span",{class:"font-medium"},"Member Since : ",-1),q={class:"flex justify-center space-x-4 mt-4"},G={key:1,class:"col-span-full"},H=t("h2",{class:"text-2xl font-extrabold mb-4 text-white"},"Edit Information",-1),K={key:0,class:"mb-4"},Q={class:"block text-white text-md font-medium mb-1 capitalize"},W=["onUpdate:modelValue","type"],X={class:"flex justify-center space-x-4 mt-4"};function Y(s,e,h,$,o,r){const g=y("Account");return i(),l("div",P,[x(g),t("div",I,[t("div",E,[t("div",C,[t("div",D,[t("img",{src:o.previewImage||r.getProfilePhotoUrl(o.user.ProfilePhoto),alt:"Profile Photo",class:"object-cover w-full h-full rounded-full"},null,8,F),o.user.isVerified?(i(),l("div",V,A)):c("",!0)])]),o.isEditing?c("",!0):(i(),l("div",L,[t("h2",S,[u(d(o.user.Fullname),1),o.user.isVerified?(i(),l("span",B,"(Verified)")):c("",!0)]),t("h3",N,[z,u(" "+d(o.user.Age),1)]),t("h3",R,[T,u(" "+d(o.user.Email),1)]),t("h3",M,[O,u(" "+d(o.user.Contactnumber),1)]),t("h3",J,[Z,u(" "+d(o.user.DateJoined),1)]),t("div",q,[t("button",{class:"bg-yellow-300 text-black font-bold py-2 px-5 rounded-lg shadow-md hover:bg-sky-600 hover:text-white transition-colors duration-200",onClick:e[0]||(e[0]=a=>o.isEditing=!0)}," Edit Information ")])])),o.isEditing?(i(),l("div",G,[H,t("input",{type:"file",onChange:e[1]||(e[1]=(...a)=>r.handleFileChange&&r.handleFileChange(...a)),class:"text-white form-input w-full rounded-lg p-2 border border-gray-300 focus:ring-2 focus:ring-teal-500 mb-4"},null,32),(i(!0),l(f,null,w(o.editableUser,(a,n)=>(i(),l(f,{key:"edit-"+n},[r.shouldShowField(n)?(i(),l("div",K,[t("label",Q,d(r.formatLabel(n)),1),v(t("input",{"onUpdate:modelValue":p=>o.editableUser[n]=p,type:n==="Password"?"password":"text",class:"form-input w-full rounded-full p-2 shadow-black shadow-lg focus:ring-2 focus:ring-teal-500"},null,8,W),[[U,o.editableUser[n]]])])):c("",!0)],64))),128)),t("div",X,[t("button",{onClick:e[2]||(e[2]=(...a)=>r.saveInformation&&r.saveInformation(...a)),class:"border-white border bg-yellow-300 hover:bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg shadow-lg transition-colors duration-200 ease-in-out"},"Save"),t("button",{onClick:e[3]||(e[3]=(...a)=>r.cancelEdit&&r.cancelEdit(...a)),class:"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg shadow-lg transition-colors duration-200 ease-in-out"},"Cancel")])])):c("",!0)])])])}const se=_(k,[["render",Y]]);export{se as default};
