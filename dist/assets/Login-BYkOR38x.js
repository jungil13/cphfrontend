import{_ as I,C as k,q as h,u as G,c as T,a as e,i as E,g as b,h as x,b as _,w,k as y,S as d,r as v,o as B,e as F,p as K,f as O}from"./index-DTcQMwFa.js";const V={components:{GoogleLogin:k},setup(){const a=h(""),t=h(""),c=G();return{email:a,password:t,handleSubmit:async()=>{var r,l;try{const o=await y.post("http://localhost:3000/api/users/login",{Email:a.value,Password:t.value}),{msg:i,token:g,username:m,userType:u}=o.data;if(o.status!==200)throw new Error(i||"Failed to login");localStorage.setItem("token",g),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",m),localStorage.setItem("userType",u),d.fire({icon:"success",title:"Login Successful",text:`You have been logged in successfully as ${m}!`,confirmButtonText:"OK"}).then(()=>{u==="Admin"?c.push("/adminlayout"):c.push("/browse")})}catch(o){d.fire({icon:"error",title:"Login Failed",text:((l=(r=o.response)==null?void 0:r.data)==null?void 0:l.msg)||o.message||"Login failed due to server error",confirmButtonText:"OK"})}},handleGoogleLogin:async r=>{var l,o;try{const{tokenId:i}=r,g=await y.post("http://localhost:3000/api/users/google-login",{idToken:i}),{msg:m,token:u,username:f,userType:p}=g.data;localStorage.setItem("token",u),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",f),localStorage.setItem("userType",p),d.fire({icon:"success",title:"Login Successful",text:`You have been logged in successfully as ${f}!`,confirmButtonText:"OK"}).then(()=>{p==="Admin"?c.push("/adminlayout"):c.push("/browse")})}catch(i){d.fire({icon:"error",title:"Login Failed",text:((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.msg)||i.message||"Login failed due to server error",confirmButtonText:"OK"})}},handleGoogleError:r=>{d.fire({icon:"error",title:"Google Login Failed",text:r.message||"Failed to login with Google",confirmButtonText:"OK"})}}}},n=a=>(K("data-v-a65128f3"),a=a(),O(),a),q={class:"mt-16"},C={class:"flex items-center justify-center min-h-screen bg-gray-100 p-4 relative py-24"},N=n(()=>e("div",{class:"bg-sky-900 absolute inset-0 w-full h-full"},null,-1)),j={class:"relative w-full max-w-lg p-10 bg-white rounded-lg shadow-lg transform transition-transform duration-500 hover:scale-105"},A=n(()=>e("h1",{class:"text-3xl font-bold mb-8 text-center text-gray-700"},"Login",-1)),D={class:"mb-6"},M=n(()=>e("label",{for:"email",class:"block text-sm font-medium text-gray-600 mb-2"},"Email",-1)),P={class:"mb-8"},R=n(()=>e("label",{for:"password",class:"block text-sm font-medium text-gray-600 mb-2"},"Password",-1)),U=n(()=>e("button",{type:"submit",class:"w-full py-3 px-6 bg-blue-500 text-white font-bold rounded-md shadow hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"}," Login ",-1)),Y=n(()=>e("div",{class:"my-4 flex items-center"},[e("hr",{class:"flex-1 border-gray-300"}),e("span",{class:"mx-4 text-gray-600"},"or"),e("hr",{class:"flex-1 border-gray-300"})],-1)),z=n(()=>e("img",{src:"https://www.gstatic.com/images/branding/product/1x/gmail_2020q4_48dp.png",alt:"Google logo",class:"w-6 h-6 mr-3"},null,-1)),H=n(()=>e("span",{class:"text-gray-800 font-semibold"},"Login with Google",-1)),J={class:"mt-6 text-center text-gray-600"};function Q(a,t,c,s,S,L){const r=v("GoogleLogin"),l=v("router-link");return B(),T("div",q,[e("div",C,[N,e("div",j,[A,e("form",{onSubmit:t[2]||(t[2]=E((...o)=>s.handleSubmit&&s.handleSubmit(...o),["prevent"]))},[e("div",D,[M,b(e("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=o=>s.email=o),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"},null,512),[[x,s.email]])]),e("div",P,[R,b(e("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=o=>s.password=o),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password"},null,512),[[x,s.password]])]),U],32),Y,_(r,{onSuccess:s.handleGoogleLogin,onError:s.handleGoogleError,class:"w-full py-3 px-6 bg-white border border-gray-300 rounded-md shadow flex items-center justify-center hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"},{default:w(()=>[z,H]),_:1},8,["onSuccess","onError"]),e("p",J,[_(l,{to:"/register",class:"text-blue-500 hover:underline"},{default:w(()=>[F("Don't have an account? Register")]),_:1})])])])])}const X=I(V,[["render",Q],["__scopeId","data-v-a65128f3"]]);export{X as default};
